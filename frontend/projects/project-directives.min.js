"use strict";!function(){function projectListTable(){return{scope:{filter:"@"},restrict:"A",replace:!0,templateUrl:"js/projects/directives/templates/project-list-table.html",controller:projectListTableCtrl,controllerAs:"ctrl"}}function projectListTableCtrl($scope,ProjectFactory,$timeout){function changeActive(t,e){ProjectFactory.save({Project:{id:e,active:t===!0?1:0}})}function deleteRow(t){var e=ProjectFactory["delete"](t);e.then(deleteSuccess)}function deleteSuccess(t){$timeout(function(){angular.forEach($this.projects,function(e,r){e.Project.id===t.data.id&&$this.projects.splice(r,1)})},400)}var $this=this;$this.projects=[],$this.pages=[5,10,15],$this.onPage=10,$this.isLoading=!1,$this.results=!0,$this.changeActive=changeActive,$this.deleteRow=deleteRow,$this.filters=$scope.$eval($scope.filter),this.loadData=function callServer(tableState){$this.isLoading=!0;var pagination=tableState.pagination,start=pagination.start||0,number=pagination.number||$this.onPage;ProjectFactory.getPage(start,number,tableState,$this.filters).then(function(result){var number_to=eval(parseInt(number)+parseInt(start));$this.projects=result.data,$this.table={start:start+1,number:number_to<result.total?number_to:result.total,total:result.total},tableState.pagination.numberOfPages=result.numberOfPages,$this.isLoading=!1,$this.results=void 0!==$this.projects?!0:!1})}}angular.module("project.directives").directive("projectListTable",projectListTable).controller("projectListTableCtrl",projectListTableCtrl),projectListTableCtrl.$inject=["$scope","ProjectFactory","$timeout"]}(),function(){function t(t,e){function r(t,e,r){e.bind("click",function(t){o(r,t)})}function o(r,o){o.preventDefault(),t.open({controller:"projectUsersCtrl as ctrl",templateUrl:"js/modal/templates/project-users-modal.html",size:"lg",resolve:{ResolveData:function(){var t={project_id:r.projectId,_recursive:-2};return e.list(t).then(function(){return console.log(e.data),{data:e.data,project_id:t.project_id}})}}})}var i={scope:{projectId:"@"},restrict:"A",link:r};return i}angular.module("project.directives").directive("projectUsers",t),t.$inject=["$modal","UserFactory"]}();